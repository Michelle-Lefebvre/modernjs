<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Async</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css"
    />
    <style>
      body {
        width: 100%;
        margin: auto;
      }
      nav {
        display: flex;
        justify-content: space-around;
      }

      .container {
        width: 60vw;
        margin: auto;
      }
      li {
        list-style-type: none;
      }
      button {
        color: darkmagenta;
        border: 2px solid darkmagenta;
      }
      #output {
        color: darkmagenta;
        font-size: large;
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="../index.html">Home</a>
      <a href="../indexDOMintro.html">Section 3</a>
      <a href="../04 Task List/index.html">Task List</a>
      <a href="../04 Loan Calculator/index.html">Loan Calculator</a>
      <a href="../04 Number Guesser/index_guess_number.html">Number Guesser</a>
      <a href="../oop/index-opp.html">OOP</a>
      <a href="../oop_book_list_prj/index.html">Book List</a>
      <a href="index_async.html" class="active">Async</a>
    </nav>
    <div class="container">
      <h1>Modern JS Course From The Beginning</h1>
      <h2>Async Ajax Fetch API</h2>
      <h3>Brad Traversy</h3>

      <h4>Section 7 - Table of Contents</h4>
      <ul>
        <li><a href="#asyncWhat">What is Asynchronous Programming?</a></li>
        <li><a href="#ajaxXHR">Ajax & XHR Introduction</a></li>
        <li><a href="#xhrObject">XHR Object Methods & Working With Text</a></li>
        <li><a href="#json">Working With Ajax & JSON</a></li>
        <li>
          <a href="#data">Data From an External API = Chuck Norris Project</a>
        </li>
        <li><a href="#rest">REST APIs & HTTP Requests</a></li>
        <li><a href="#callback">Callback Functions</a></li>
        <li>
          <a href="#library"
            >Custom HTTP Library (Ajax with Callbacks) - Part 1 & 2</a
          >
        </li>
        <li><a href="#promises">ES6 Promises</a></li>
        <li><a href="#fetch">The Fetch API</a></li>
        <li><a href="#errorFetch">Error Handeling with Fetch</a></li>
        <li><a href="#arrow">Arrow Functions</a></li>
        <li>
          <a href="#libraryFetch"
            >Custom HTTP Library (Fetch With Promises - Part 3</a
          >
        </li>
        <li><a href="#await">Async & Await</a></li>
        <li>
          <a href="#libraryFetchAsyncAwait"
            >Custom HTTP Library (Fetch With Async Await) - Part 4</a
          >
        </li>
      </ul>

      <div id="asyncWhat">
        <h2>What is Asynchronous Programming?</h2>
        <h3>What is Synchronous Code?</h3>
        <p>
          Synchronous code is referred to as Blocking Code because it must wait
          to load, however long that may take.
        </p>
        <code>
          posts = loadPostsSync(); <br />
          // ...wait til posts are fetched <br />
          // ...do something with posts doTheNextThing*(); <br />
          // Has to wait until posts load<br />
        </code>
        <br /><br />
        <h3>What is Asynchronous Programming?</h3>
        <p>
          Ajax isn't a language or framework or a library.
          <br />
          It's a set of web technologies to send and receive data from the
          client and server.
          <br />
          And it does this asynchronously.So it's done behind the scenes without
          having to explicitly reload the Web page.
        </p>
        <p>Most Async code you work with will be part of an API library.</p>
        <ul>
          <li>XMLHttpRequest & Fetch</li>
          <li>jQuery Ajax, Axios, other HTTP libraries</li>
          <li>Node.js fs ( filesystem ) module</li>
        </ul>
        <p>
          These are all async technologies, so you just have to handle the
          response in a certain way.
        </p>
        <p>There are a few ways to work with Async code:</p>
        <ul>
          <li>Callbacks</li>
          <li>Promises ES6</li>
          <li>Async/Await</li>
        </ul>
      </div>

      <div id="ajaxXHR">
        <h2>Ajax & XHR Introduction</h2>
        AJAX === Asynchronous JavaScript in XML
        <h3>What is Ajax?</h3>
        <ul>
          <li>Asynchronoous JavaScript & XML</li>
          <li>Set of web technologies</li>
          <li>Send & Receive data asynchronously</li>
          <li>Does not interfere with the current page</li>
          <li>JSON has replaced XML for the most part</li>
          <br />
          <li>Make async requests in the background</li>
          <li>No page reload / refresh</li>
          <li>Fetch data</li>
          <li>Very interactive</li>
        </ul>

        <h3>XmlHttpRequest (XHR) Object</h3>
        <ul>
          <li>API in the form of an object</li>
          <li>Provided by the browsers JS environment</li>
          <li>Methods transfer data between client / server</li>
          <li>Can be used with other protcols than HTTP</li>
          <li>Can work with data other than XML (JSON, plain text)</li>
        </ul>

        <h3>Libraries & Other Methods</h3>
        <ul>
          <li>Fetch API</li>
          <li>Axios</li>
          <li>Superagent</li>
          <li>jQuery</li>
          <li>Node HTTP</li>
        </ul>
      </div>

      <div id="xhrObject">
        <h2>XHR Object Methods & Working With Text file</h2>

        <div class="container">
          <button id="button">Get Data</button>
          <br />
          <div id="output"></div>
        </div>

        <script src="./xhr/app_xhr.js"></script>

        <h4>The steps:</h4>
        <h5>Add event listener</h5>
        <code>
            document.getElementById('button').addEventListener('click', loadData);
        </code>
        <br>
        <h5>Create Function</h5>
        <code>
            function loadData() {<br>
                <br>
                // Step 1: Create an XHR Object<br>
                const xhr = new XMLHttpRequest();<br>
            <br>
                // Step 2: Open method - type of request<br>
                xhr.open('GET', 'data.txt', true);<br>
                console.log("READYSTATE", xhr.readyState);<br>
            <br>
                // Step 2B: Optional - Used for spinners/loader<br>
                xhr.onprogress = function () {<br>
                    console.log("READYSTATE", xhr.readyState);<br>
                }
        </code>

        </code>
        <p>
          Need to check the HTTP Statuses: <br />
          200: "OK" <br />
          403: "Forbidden" <br />
          404: "Not Found"
        </p>
        <h6>Step 3:
          Check status of request using <strong>onload</strong> - new method
        </h6>
        <code>
          xhr.onload = function () { <br />
          &nbsp;&nbsp;if (this.status === 200) {<br />
          &nbsp;&nbsp;&nbsp;&nbsp;console.log(this.responseText);<br />
          &nbsp;&nbsp;}<br />
          };<br />
        </code>

        <p>
          The readyState Values indicate the processing steps:<br />
          0: request not initialized <br />
          1: server connection established<br />
          2: request received <br />
          3: processing request <br />
          4: request finished and response is ready
        </p>

        <h6>
          Step 3: (alternate) Check status of request using <strong>onreadystatechange</strong> -
          old method
        </h6>
        <code>
          xhr.onreadystatechange = function () {<br />
          &nbsp;&nbsp;if (this.status === 200 && this.readyState === 4) {<br />
          &nbsp;&nbsp;&nbsp;&nbsp;console.log(this.responseText);<br />
          &nbsp;&nbsp;}<br />
          }
        </code>
        <h6>Step 4: check for errors</h6>
        <code>
         xhr.onerror = function () {<br>
        console.log('Request error...');<br>
    }<br>

    // Step 5: send request<br>
    xhr.send();<br>
}
        </code>
      </div>

      <div id="json">
        <h2>Working With Ajax & JSON</h2>
        <div class="container">
          <button id="btn1">Get Customer</button>
          <button id="btn2">Get Customers</button>
          <br />
          <h3>Customer</h3>
          <p>Output from local json file</p>
          <div id="customer"></div>

          <h3>Customers</h3>
          <p>Output from array of objects in a local json file</p>
          <div id="customers"></div>
        </div>
        <p>
          Do validate your code with
          <a href="https:/jsonlint.com">https:/jsonlint.com</a>
        </p>

        <script src="app_json_ajax_xhr.js"></script>
      </div>

      <div id="data">
        <h2>Data From an External API = Chuck Norris Project</h2>
        <div class="container">
          <h4>Chuck Norris Generator</h4>
          <form>
            <div>
              <label for="number">Number of Jokes</label>
              <input type="text" id="number" />
            </div>
            <div>
              <button class="get-jokes">Get Jokes</button>
            </div>
          </form>
          <ul class="jokes"></ul>
        </div>
      </div>

      <div id="rest">
        <h2>REST APIs & HTTP Requests</h2>
      </div>

      <div id="callback">
        <h2>Callback Functions</h2>
      </div>

      <div id="library">
        <h2>Custom HTTP Library (Ajax with Callbacks) - Part 1 & 2</h2>
      </div>

      <div id="promises">
        <h2>ES6 Promises</h2>
      </div>

      <div id="fetch">
        <h2>The Fetch API</h2>
      </div>

      <div id="errorFetch">
        <h2>Error Handeling with Fetch</h2>
      </div>

      <div id="arrow">
        <h2>Arrow Functions</h2>
      </div>

      <div id="libraryFetch">
        <h2>ustom HTTP Library (Fetch With Promises - Part 3</h2>
      </div>

      <div id="await">
        <h2>Async & Await</h2>
      </div>

      <div id="libraryFetchAsyncAwait">
        <h2>Custom HTTP Library (Fetch With Async Await) - Part 4</h2>
      </div>
    </div>

    <script src="app_async.js"></script>
  </body>
</html>
